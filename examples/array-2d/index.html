<!doctype html>
<html>

<head>
<title>Roguelike JS Skeleton | Array2d example</title>
    <link rel="stylesheet" href="../../css/style.css" type="text/css">
    <link rel="stylesheet" href="../css/style.css" type="text/css">
    <link rel="stylesheet" href="../vendor/prism.css" type="text/css">
</head>

<body>
    <div class="page">
        <pre>
Roguelike JS Skeleton - Examples - Array2d

<strong>Example setup code</strong> (Run before all examples) <a href="#" class="btn btn-toggle-setup">Show / Hide</a>
        </pre>


        <pre class="setup-code">
            <code class="language-javascript">
var array2dFromMapData = function(mapData){
    var width = mapData[0].length,
        height = mapData.length;
    var array2d = new RL.Array2d(width, height);
    // loop over each coord in the Array2d (val will be undefined)
    array2d.each(function(val, x, y){
        var char = mapData[y][x];
        var tileData = {
            char: char,
            bgColor: '#222',
            color: '#fff'
        };
        if(char === '.'){
            tileData.color = '#808080';
        }
        else if(char === '#'){
            tileData.color = '#fff';
        }
        else if(char === 'a'){
            tileData.color = 'red';
        }
        else if(char === 'b'){
            tileData.color = 'blue';
        }
        else if(char === 'c'){
            tileData.color = 'yellow';
        }
        // set value at coord
        array2d.set(x, y, tileData);
    });
    return array2d;
};

var rendererFromArray2d = function(array2d){
    var renderer = new RL.Renderer();
    // make the tiles big
    renderer.tileSize = 20;
    // set the view width and height (in this case we want to see the whole map so it is the same as the map width)
    renderer.resize(array2d.width, array2d.height);
    return renderer;
};
            </code>
        </pre>

        <div class="example-container">
            <pre><strong>Basic Map</strong></pre>
            <div class="ex-col-left">
                <div id="ex-1-container" class="map-container" style="float:left"></div>
            </div>
            <div class="ex-col-right">
                <a href="#" class="btn btn-block ex-btn-run">Run</a>
                <pre class="ex-code">
                    <code class="language-javascript">
var mapData = [
    '##########',
    '#........#',
    '#........#',
    '#........#',
    '#........#',
    '##########',
];
var array2d = array2dFromMapData(mapData);
var renderer = rendererFromArray2d(array2d);
var containerEl = document.getElementById('ex-1-container');
// clear contents and append elements created by the game to the DOM
containerEl.innerHTML = '';
containerEl.appendChild(renderer.canvas);
renderer.draw(array2d);
                    </code>
                </pre>
                <textarea class="ex-code-input">

                </textarea>
            </div>
        </div>

        <div class="example-container">
            <pre><strong>Manipulate coord values</strong></pre>
            <div class="ex-col-left">
                <div id="ex-2-container" class="map-container" style="float:left"></div>
            </div>
            <div class="ex-col-right">
            <a href="#" class="btn btn-block ex-btn-run">Run</a>
                <pre class="ex-code">
                    <code class="language-javascript">
var mapData = [
    '##########',
    '#........#',
    '#.Z......#',
    '#........#',
    '#........#',
    '##########',
];
var array2d = array2dFromMapData(mapData);
var renderer = rendererFromArray2d(array2d);
var containerEl = document.getElementById('ex-2-container');
// clear contents and append elements created by the game to the DOM
containerEl.innerHTML = '';
containerEl.appendChild(renderer.canvas);

array2d.remove(2, 2);

var aTile = array2d.get(4, 2); // {char: '.', bgColor: '#222', color: '#808080'}
aTile.char = 'a';
aTile.bgColor = '#444';

array2d.set(5, 4, {
    char: 'x',
    color: 'red'
});


// draw to show changes
renderer.draw(array2d);
                    </code>
                </pre>
                <textarea class="ex-code-input">

                </textarea>

            </div>
        </div>

        <div class="example-container">
            <pre><strong>Get Adjacent</strong></pre>
            <div class="ex-col-left">
                <div id="ex-3-container" class="map-container" style="float:left"></div>
            </div>
            <div class="ex-col-right">
            <a href="#" class="btn btn-block ex-btn-run">Run</a>
                <pre class="ex-code">
                    <code class="language-javascript">
var mapData = [
    '##########',
    '#........#',
    '#...X....#',
    '#........#',
    '#........#',
    '##########',
];
var array2d = array2dFromMapData(mapData);
var renderer = rendererFromArray2d(array2d);
var containerEl = document.getElementById('ex-3-container');
// clear contents and append elements created by the game to the DOM
containerEl.innerHTML = '';
containerEl.appendChild(renderer.canvas);

var adjacentTiles = array2d.getAdjacent(4, 2);
for (var i = 0; i < adjacentTiles.length; i++) {
    adjacentTiles[i].bgColor = '#555';
}

// draw to show changes
renderer.draw(array2d);
                    </code>
                </pre>
                <textarea class="ex-code-input">

                </textarea>

            </div>
        </div>

        <div class="example-container">
            <pre><strong>Find Nearest</strong></pre>
            <div class="ex-col-left">
                <div id="ex-4-container" class="map-container" style="float:left"></div>
            </div>
            <div class="ex-col-right">
            <a href="#" class="btn btn-block ex-btn-run">Run</a>
                <pre class="ex-code">
                    <code class="language-javascript">
var mapData = [
    '##########',
    '#.c.....b#',
    '#...a....#',
    '#.b...b..#',
    '#.......c#',
    '##########',
];
var array2d = array2dFromMapData(mapData);
var renderer = rendererFromArray2d(array2d);
var containerEl = document.getElementById('ex-4-container');
// clear contents and append elements created by the game to the DOM
containerEl.innerHTML = '';
containerEl.appendChild(renderer.canvas);

// findNearest returns an array of all results.
var nearestCTiles = array2d.findNearest(4, 2, 10, function(val, x, y){
    return val && val.char === 'c';
});
// in this case there is only one result
nearestCTiles[0].bgColor = 'green';

// There will be multiple results if mutiple coord values match and are the same closest distance away.
var nearestBTiles = array2d.findNearest(4, 2, 10, function(val, x, y){
    return val && val.char === 'b';
});

// in this case there are 2 'b' tiles the same distance from the 'a' tile
for (var i = 0; i < nearestBTiles.length; i++) {
    var nearestB = nearestBTiles[i];
    nearestB.bgColor = 'green';
}

// draw to show changes
renderer.draw(array2d);
                    </code>
                </pre>
                <textarea class="ex-code-input">

                </textarea>

            </div>
        </div>

        <div class="example-container">
            <pre><strong>Get Adjacent</strong></pre>
            <div class="ex-col-left">
                <div id="ex-3-container" class="map-container" style="float:left"></div>
            </div>
            <div class="ex-col-right">
            <a href="#" class="btn btn-block ex-btn-run">Run</a>
                <pre class="ex-code">
                    <code class="language-javascript">
var mapData = [
    '##########',
    '#........#',
    '#...X....#',
    '#........#',
    '#........#',
    '##########',
];
var array2d = array2dFromMapData(mapData);
var renderer = rendererFromArray2d(array2d);
var containerEl = document.getElementById('ex-3-container');
// clear contents and append elements created by the game to the DOM
containerEl.innerHTML = '';
containerEl.appendChild(renderer.canvas);

var adjacentTiles = array2d.getAdjacent(4, 2);
for (var i = 0; i < adjacentTiles.length; i++) {
    adjacentTiles[i].bgColor = '#555';
}

// draw to show changes
renderer.draw(array2d);
                    </code>
                </pre>
                <textarea class="ex-code-input">

                </textarea>

            </div>
        </div>

        <div class="example-container">
            <pre><strong>Get within square radius</strong></pre>
            <div class="ex-col-left">
                <div id="ex-5-container" class="map-container" style="float:left"></div>
            </div>
            <div class="ex-col-right">
            <a href="#" class="btn btn-block ex-btn-run">Run</a>
                <pre class="ex-code">
                    <code class="language-javascript">
var mapData = [
    '##########',
    '#.....c.c#',
    '#.c......#',
    '#...Xc.c.#',
    '#..c.....#',
    '##########',
];
var array2d = array2dFromMapData(mapData);
var renderer = rendererFromArray2d(array2d);
var containerEl = document.getElementById('ex-5-container');
// clear contents and append elements created by the game to the DOM
containerEl.innerHTML = '';
containerEl.appendChild(renderer.canvas);

var tiles = array2d.getWithinSquareRadius(4, 3, 2, function(val, x, y){
    return val && val.char === 'c';
});

for (var i = 0; i < tiles.length; i++) {
    tiles[i].bgColor = '#555';
}

// draw to show changes
renderer.draw(array2d);
                    </code>
                </pre>
                <textarea class="ex-code-input">

                </textarea>

            </div>
        </div>

        <div class="example-container">
            <pre><strong>Filter</strong></pre>
            <div class="ex-col-left">
                <div id="ex-6-container" class="map-container" style="float:left"></div>
            </div>
            <div class="ex-col-right">
            <a href="#" class="btn btn-block ex-btn-run">Run</a>
                <pre class="ex-code">
                    <code class="language-javascript">
var mapData = [
    '##########',
    '#.a...c.c#',
    '#.c.b.b..#',
    '#...ac.c.#',
    '#b.c..a..#',
    '##########',
];
var array2d = array2dFromMapData(mapData);
var renderer = rendererFromArray2d(array2d);
var containerEl = document.getElementById('ex-6-container');
// clear contents and append elements created by the game to the DOM
containerEl.innerHTML = '';
containerEl.appendChild(renderer.canvas);

var tiles = array2d.filter(function(val, x, y){
    return val && val.char === 'c';
});

for (var i = 0; i < tiles.length; i++) {
    tiles[i].bgColor = '#555';
}

// draw to show changes
renderer.draw(array2d);
                    </code>
                </pre>
                <textarea class="ex-code-input">

                </textarea>

            </div>
        </div>

        <div class="example-container">
            <pre><strong>Get line through</strong></pre>
            <div class="ex-col-left">
                <div id="ex-7-container" class="map-container" style="float:left"></div>
            </div>
            <div class="ex-col-right">
            <a href="#" class="btn btn-block ex-btn-run">Run</a>
                <pre class="ex-code">
                    <code class="language-javascript">
var mapData = [
    '##########',
    '#........#',
    '#........#',
    '#....b...#',
    '#.a......#',
    '##########',
];
var array2d = array2dFromMapData(mapData);
var renderer = rendererFromArray2d(array2d);
var containerEl = document.getElementById('ex-7-container');
// clear contents and append elements created by the game to the DOM
containerEl.innerHTML = '';
containerEl.appendChild(renderer.canvas);

var a = {
    x: 2,
    y: 4
};
var b = {
    x: 5,
    y: 3
};

var tiles = array2d.getLineThrough(a.x, a.y, b.x, b.y, function(val, x, y){
    // stop at wall
    return val && val.char === '#';
});

for (var i = 0; i < tiles.length; i++) {
    tiles[i].bgColor = '#555';
}

// draw to show changes
renderer.draw(array2d);
                    </code>
                </pre>
                <textarea class="ex-code-input">

                </textarea>

            </div>
        </div>

    </div>


    <script src="../../js/vendor/hidpi-canvas.min.js"></script>
    <script src="../vendor/jquery.min.js"></script>
    <script src="../vendor/prism.js"></script>
    <script src="../../js/rl.js"></script>
    <script src="../../js/renderer.js"></script>
    <script src="../../js/array-2d.js"></script>

    <script src="main.js"></script>
    <script src="../example.js"></script>

</body>

</html>
